{"version":3,"sources":["dist/droneaid-tfjs.js"],"names":["droneaid","exports","imageToTensor","imageData","tf","tidy","imgTensor","browser","fromPixels","targetSize","width","height","resizeRatio","Math","max","round","computeTargetSize","shape","resizeBilinear","expandDims","preprocess","imageInput","Promise","resolve","reject","img","Image","onload","onerror","err","src","getImageData","then","inputTensor","catch","console","error","model","warmed","load","initialize","istrue","warmup","loadGraphModel","m","run","async","imageTensor","results","executeAsync","image_tensor","Error","ones","param","toLowerCase","init","document","currentScript","getAttribute","log","labels","postprocess","inferenceResults","options","minScore","iou","maxBoxes","scoreThreshold","iouThreshold","maxNumBoxes","scores","data","boxes","unstack","dispose","maxScores","classes","numBoxes","numClasses","maxes","i","Number","MIN_VALUE","index","j","calculateMaxScores","boxes2","reshape","boxes3","array","indexTensor","image","nonMaxSuppressionAsync","indexes","objects","length","idx","bbox","push","class","score","map","b","toFixed","label","formatResponse","processInput","inputImage","mirrorImage","runInference","processOutput","loadModel","predict","outputTensor","version","Object","defineProperty","value"],"mappings":"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"}